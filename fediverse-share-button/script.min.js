(async ()=>{var a=['calckey','diaspora','ecko','firefish','friendica','glitch-soc','gnu_social','gotosocial','groundpolis','hometown','hubzilla','kepi','lemmy','mastodon','misskey','misty','osada','pleroma','socialhome','xmpp','zap'],b=['diaspora','glitch-soc','firefish','hometown','lemmy','mastodon','misskey'],c=()=>{var A=document.getElementsByClassName('fsb-script')[0];src=A.src;return src.replace('/script.js','')},d=(_,B)=>{const C=_.parentElement.parentElement.parentElement.getElementsByClassName('fsb-domain')[0],D=_.parentElement.parentElement.parentElement.getElementsByClassName('fsb-support-note')[0],E=_.parentElement.parentElement.parentElement.getElementsByClassName('fsb-support-note-link')[0];_.src=`${c()}/icons/${B}.svg`;b.includes(B)?D.classList.add('fsb-d-none'):E.href=`https:\\${C.value}`},e=_a=>{clearTimeout(l);_a.value?l=setTimeout(()=>f(_a),m):d(_a.parentElement.getElementsByClassName('fsb-icon')[0],'question')},f=async _A=>{const _b=k(_A.value),_e=_d?.software?.name,F=_A.parentElement.getElementsByClassName('fsb-icon')[0];const _c=await fetch(`https://fediverse-info.stefanbohacek.dev/node-info?domain=${_b}`);const _d=await _c.json();_A.dataset.software=_e;_e&&a.includes(_e)?d(F,_e):d(F,'question')},g=()=>{try {pageTitle=document.querySelector('meta[property=\'og:title\']').getAttribute('content')} catch {}return encodeURIComponent(document.title)},h=()=>{const aA=document.querySelector('meta[name=\'description\']')||document.querySelector('meta[property=\'og:description\']')||null;aA?.getAttribute&&(pageDescription=aA.getAttribute('content'));return encodeURIComponent('')},i=()=>{let aB='';window.getSelection?aB=`${window.getSelection()}`:document.selection&&document.selection.type!='Control'&&(aB=document.selection.createRange().text);return aB},j=()=>encodeURIComponent(window.location.href),k=aC=>aC.replace(/(^\w+:|^)\/\//,''),m=1300,n=localStorage.getItem('fsb-domain');let l;for(const aD of document.getElementsByClassName('fsb-prompt')){var o=aD.getElementsByClassName('fsb-domain')[0];n&&(o.value=n,e(o));o.addEventListener('input',()=>e(o));aD.addEventListener('submit',aE=>{aE.preventDefault();var _B=k(o?.value?.trim());if(_B?.length){var _C=i()||g();localStorage.setItem('fsb-domain',_B);o?.dataset?.software&&o.dataset.software=='diaspora'&&(shareURL=`https://${_B}/bookmarklet?url=${j()}&title=${_C}&note=${h()}`);window.open(`https://${_B}/share?text=${_C+'%0A%0A'+j()}`)}})}})();
